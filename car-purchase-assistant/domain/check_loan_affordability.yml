actions:
  - action_check_loan_affordability
  - action_validate_financial_info
  - action_calculate_affordability

slots:
  monthly_income:
    type: float
    mappings:
      - type: from_llm
  monthly_expenses:
    type: float
    mappings:
      - type: from_llm
  debt_to_income_ratio:
    type: float
    mappings:
      - type: controlled
  affordability_status:
    type: text
    mappings:
      - type: controlled
  max_affordable_payment:
    type: float
    mappings:
      - type: controlled
  valid_financial_info:
    type: bool
    mappings:
      - type: controlled

responses:
  utter_ask_monthly_income:
    - text: "What is your monthly gross income before taxes?"
  utter_ask_monthly_expenses:
    - text: "What are your estimated monthly expenses excluding existing debt payments?"
  utter_affordability_intro:
    - text: "I'll help you determine if you can afford a new car loan. I need to collect some financial information to make an accurate assessment."
  utter_loan_affordability:
    - text: "Based on your monthly income of ${monthly_income} and monthly expenses of ${monthly_expenses}, your debt-to-income ratio is {debt_to_income_ratio}%. {affordability_status} The maximum car payment you can afford is approximately ${max_affordable_payment} per month."
  utter_financial_info_error:
    - text: "I'm sorry, I was unable to validate your financial information. Please try again."
